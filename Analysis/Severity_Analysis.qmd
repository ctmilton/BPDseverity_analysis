---
title: "Analysis of Severity Data"
format: html
editor: visual
jupyter: python3
---

```{python}
import math
import statistics
import numpy as np
import pandas as pd
import scipy.stats
import matplotlib.pyplot as plt
plt.style.use('ggplot')
#import statsmodels.formula.api as smf
import statsmodels.api as sm
import pylab as py
#import seaborn as sns
#sns.set(style="white")
#sns.set(style="whitegrid", color_codes=True)

from sklearn.decomposition import PCA
```

```{python}
s_df = pd.read_csv(r"../Data/SeverityData/severity_noNaNs.csv")
```

# Descriptive Statistics
```{python}
result = s_df.iloc[:,s_df.columns.get_loc('abandonment'):s_df.columns.get_loc('dissociation_and_paranoid_ideation')+1].describe()
print(result)
```

```{python}
#| message: false

## creating box plots
# plt.clf()
# fig, ax = plt.subplots()
# ax.boxplot((s_df.abandonment,
#             s_df.interpersonal_relationships,
#             s_df.identity,
#             s_df.impulsivity,
#             s_df.parasuicidal_behavior,
#             s_df.affective_instability,
#             s_df.emptiness,
#             s_df.outbursts_of_anger,
#             s_df.dissociation_and_paranoid_ideation),
#             vert=False, showmeans=True, meanline=True,
#             labels=('abandonment',
#                     'interpersonal_relationships',
#                     'identity',
#                     'impulsivity',
#                     'parasuicidal_behavior',
#                     'affective_instability',
#                     'emptiness',
#                     'outbursts_of_anger',
#                     'dissociation_and_paranoid_ideation'),
#             patch_artist=True,
#             medianprops={'linewidth': 2, 'color': 'purple'},
#             meanprops={'linewidth': 2, 'color': 'red'})
# plt.show()
```

```{python}
sm.qqplot(s_df.abandonment, line ='45')
py.show()
```
```{python}
sm.qqplot(s_df.interpersonal_relationships, line ='45')
py.show()
```

```{python}
sm.qqplot(s_df.identity, line ='45')
py.show()
```

```{python}
sm.qqplot(s_df.impulsivity, line ='45')
py.show()
```

```{python}
sm.qqplot(s_df.parasuicidal_behavior, line ='45')
py.show()
```

```{python}
sm.qqplot(s_df.affective_instability, line ='45')
py.show()
```

```{python}
sm.qqplot(s_df.emptiness, line ='45')
py.show()
```

```{python}
sm.qqplot(s_df.outbursts_of_anger, line ='45')
py.show()
```

```{python}
sm.qqplot(s_df.dissociation_and_paranoid_ideation, line ='45')
py.show()
```

The distributions look clearly non-normal, but that doesn't matter since I will be using Dimensionality Reduction with PCA, which doesn't require normality in the data.


# Dimensionality Reduction with Principle Component Analysis (PCA)

```{python}
#n_components == min(n_samples, n_features)
pca = PCA(n_components=3)
pca.fit(s_df.iloc[:,3:12])
```

```{python}
q = pca.transform(s_df.iloc[:,3:12])
xp, yp = q[:,0], q[:,1]

#import plotly.express as px
#px.scatter_3d(x=xp, y=yp, z=z, labels={"x":"x'", "y":"y'", "z":"z"}).show()
```

